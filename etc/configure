#!/bin/sh
# The simplest configure for win loader

for parm in "$@" ; do
  if test "$parm" = "--help" || test "$parm" = "-help" || test "$parm" = "-h" ; then
    cat << EOF

Usage: $0 [OPTIONS]...

Configuration:
  -h, --help               display this help and exit

Installation directories:
  --prefix=DIR           use this prefix for installing mplayer [/usr/local]

Fine tuning of the installation directories:
  --datadir=DIR          use this prefix for installing machine independent
                         data files (fonts, skins) [PREFIX/share/mplayer]
  --confdir=DIR          use this prefix for installing configuration files
                         [same as datadir]

Program names:
  --program-suffix=SUFX  append SUFX to installed program names

EOF
    exit 0
  fi
done # for parm in ...


# LGB: temporary files
for I in "$TMPDIR" "$TEMPDIR" "/tmp" ; do
  test "$I" && break
done

TMPLOG="configure.log"
rm -f "$TMPLOG"
TMPC="$I/mplayerxp-conf-$RANDOM-$$.c"
TMPCPP="$I/mplayerxp-conf-$RANDOM-$$.cpp"
TMPO="$I/mplayerxp-conf-$RANDOM-$$.o"
TMPS="$I/mplayerxp-conf-$RANDOM-$$.S"

prefix="/usr/local"
psuffix=
for ac_option do
  case "$ac_option" in
  --prefix=*)
    prefix=`echo $ac_option | cut -d '=' -f 2`
    ;;
  --datadir=*)
    datadir=`echo $ac_option | cut -d '=' -f 2`
    ;;
  --confdir=*)
    confdir=`echo $ac_option | cut -d '=' -f 2`
    ;;
  --program-suffix=*)
    psuffix=`echo $ac_option | cut -d '=' -f 2`
    ;;
  *)
    ;;
  esac
done

prog_alias="mplayerxp$psuffix"
# Atmos: moved this here, to be correct, if --prefix is specified
test -z "$_datadir" && datadir="$prefix/share/$prog_alias"
test -z "$_confdir" && confdir="$datadir"

#############################################################################
echo "Creating config.mak"
cat > config.mak << EOF
# -------- Generated by configure -----------
PROGNAME = $prog_alias
prefix = $prefix
DATADIR = $datadir
CONFDIR = $confdir

EOF

# Last move:
rm -f "$TMPO" "$TMPC" "$TMPS" "$TMPCPP"
